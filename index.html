<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NHL Bracket 2025</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    label, select, input { display: block; margin-bottom: 10px; }
    select:disabled { color: gray; }
  </style>
</head>
<body>
  <h1>NHL Playoff Bracket - 2025</h1>

  <form id="bracket-form" action="https://script.google.com/macros/s/AKfycbz7YYcbwbnWuHajLNypDJaxg3Lc4GSfaVL0VX-NKzeOB8IdiWrBWnuiPJMVLnAaWzUS_w/exec" method="POST">
    <label for="name">Your Name:</label>
    <input type="text" id="name" name="name" required />

    <!-- Matchups Loop (example for 1, repeat for all 8) -->
    <div id="matchups">
      <!-- These divs will be filled dynamically -->
    </div>

    <button type="submit">Submit Picks</button>
  </form>

  <script>
    const matchups = [
      "WSH|MON",
      "TOR|OTT",
      "TBL|FLA",
      "CAR|NJD",
      "WPG|STL",
      "VGK|MIN",
      "DAL|COL",
      "LAK|EDM"
    ];

    function createMatchupRow(index, teams, xFactors) {
      const div = document.createElement('div');

      const [team1, team2] = teams.split('|');

      div.innerHTML = `
        <label>Matchup ${index + 1}: ${team1} vs ${team2}</label>
        <select name="winner${index + 1}" required>
          <option value="">-- Choose Winner --</option>
          <option value="${team1}">${team1}</option>
          <option value="${team2}">${team2}</option>
        </select>

        <select name="games${index + 1}" required>
          <option value="">-- Games --</option>
          ${[4, 5, 6, 7].map(num => `<option value="${num}">${num} games</option>`).join('')}
        </select>

        <select name="xfactor${index + 1}" required>
          <option value="">-- X-Factor --</option>
          ${(xFactors[teams] || []).map(p => `<option value="${p}">${p}</option>`).join('')}
        </select>
      `;

      return div;
    }

    function populateXFactors(data) {
      const matchupsDiv = document.getElementById("matchups");
      matchupsDiv.innerHTML = "";

      matchups.forEach((teams, i) => {
        const row = createMatchupRow(i, teams, data.players);
        matchupsDiv.appendChild(row);
      });
    }

    // JSONP script to fetch X-Factors (bypasses CORS)
    const script = document.createElement("script");
    script.src = "https://script.google.com/macros/s/AKfycbz7YYcbwbnWuHajLNypDJaxg3Lc4GSfaVL0VX-NKzeOB8IdiWrBWnuiPJMVLnAaWzUS_w/exec?get=_
